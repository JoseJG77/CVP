/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/sweetalert2@11.21.0/src/instanceMethods/close.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import globalState,{restoreActiveElement}from"../globalState.js";import{removeKeydownHandler}from"../keydown-handler.js";import privateMethods from"../privateMethods.js";import privateProps from"../privateProps.js";import{unsetAriaHidden}from"../utils/aria.js";import{swalClasses}from"../utils/classes.js";import*as dom from"../utils/dom/index.js";import{undoIOSfix}from"../utils/iosFix.js";import{undoReplaceScrollbarWithPadding}from"../utils/scrollbar.js";import{isSafariOrIOS}from"../utils/iosFix.js";function removePopupAndResetState(e,s,o,t){dom.isToast()?triggerDidCloseAndDispose(e,t):(restoreActiveElement(o).then((()=>triggerDidCloseAndDispose(e,t))),removeKeydownHandler(globalState)),isSafariOrIOS?(s.setAttribute("style","display:none !important"),s.removeAttribute("class"),s.innerHTML=""):s.remove(),dom.isModal()&&(undoReplaceScrollbarWithPadding(),undoIOSfix(),unsetAriaHidden()),removeBodyClasses()}function removeBodyClasses(){dom.removeClass([document.documentElement,document.body],[swalClasses.shown,swalClasses["height-auto"],swalClasses["no-backdrop"],swalClasses["toast-shown"]])}export function close(e){e=prepareResolveValue(e);const s=privateMethods.swalPromiseResolve.get(this),o=triggerClosePopup(this);this.isAwaitingPromise?e.isDismissed||(handleAwaitingPromise(this),s(e)):o&&s(e)}const triggerClosePopup=e=>{const s=dom.getPopup();if(!s)return!1;const o=privateProps.innerParams.get(e);if(!o||dom.hasClass(s,o.hideClass.popup))return!1;dom.removeClass(s,o.showClass.popup),dom.addClass(s,o.hideClass.popup);const t=dom.getContainer();return dom.removeClass(t,o.showClass.backdrop),dom.addClass(t,o.hideClass.backdrop),handlePopupAnimation(e,s,o),!0};export function rejectPromise(e){const s=privateMethods.swalPromiseReject.get(this);handleAwaitingPromise(this),s&&s(e)}export const handleAwaitingPromise=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,privateProps.innerParams.get(e)||e._destroy())};const prepareResolveValue=e=>void 0===e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),handlePopupAnimation=(e,s,o)=>{const t=dom.getContainer(),i=dom.hasCssAnimation(s);"function"==typeof o.willClose&&o.willClose(s),globalState.eventEmitter?.emit("willClose",s),i?animatePopup(e,s,t,o.returnFocus,o.didClose):removePopupAndResetState(e,t,o.returnFocus,o.didClose)},animatePopup=(e,s,o,t,i)=>{globalState.swalCloseEventFinishedCallback=removePopupAndResetState.bind(null,e,o,t,i);const a=function(e){e.target===s&&(globalState.swalCloseEventFinishedCallback?.(),delete globalState.swalCloseEventFinishedCallback,s.removeEventListener("animationend",a),s.removeEventListener("transitionend",a))};s.addEventListener("animationend",a),s.addEventListener("transitionend",a)},triggerDidCloseAndDispose=(e,s)=>{setTimeout((()=>{"function"==typeof s&&s.bind(e.params)(),globalState.eventEmitter?.emit("didClose"),e._destroy&&e._destroy()}))};export{close as closePopup,close as closeModal,close as closeToast};
//# sourceMappingURL=/sm/99f117fc7db57590133b06d97eeb3204185c52231e984c051bdba66c132f8cc6.map